<!DOCTYPE html>
<html>

<head>
  <title>Hostel-Attendance</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    .container1 {
      display: flex;
      flex-direction: column;
      gap: 14px;
      margin-top: 50px;
    }

    .topLabel {
      display: flex;
      justify-content: center;
      color: #1877f2;
      font-weight: bold;
    }

    .container {
      display: flex;
      justify-content: center;
      border-radius: 8px;
      padding: 30px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, .1), 0 8px 16px rgba(0, 0, 0, .1);
      width: 450px;
      margin-bottom: 10px;
    }

    .alterLabel {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      display: flex;
      gap: 30px;
    }

    .label {
      width: 400px;
    }

    .fontStyle {
      font-size: 18px;
      font-weight: 400px;
    }

    .fontStyle-2 {
      font-size: 16px;
    }

    .log {
      width: 100px;
    }

    .secure {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
    }

    .check {
      margin-left: 140px;
      margin-bottom: 6px;
    }
  </style>
</head>

<body>
  <div class="container1">
    <h2 class="topLabel">Attendance</h2>
    <div class="container">
      <form id="loginForm">
        <p class="font-weight-bold">Hostel-Attendance</p>
        <div class="form-group">
          <label for="user" class="fontStyle">Username</label>
          <input type="text" class="form-control label" id="user" onkeyup="toggleLoginButton()">
        </div>
        <div class="form-group">
          <label for="password" class="fontStyle">Password</label>
          <input type="password" class="form-control label" id="password" onkeyup="toggleLoginButton()">
        </div>
        <div class="secure">
          <a href="">Forget Password?</a>
          <input type="checkbox" onclick="secure()" class="check">
          <label for="password" class="fontStyle-2">Show Password</label>
        </div>
        <div class="alterLabel">
          <a href="/signup" class="btn btn-primary fontStyle">Signup</a>
          <button onclick="loginUser()" class="btn btn-success log fontStyle" id="loginButton" disabled>Login</button>
        </div>
      </form>
    </div>
  </div>
</body>
<script>
  const loginButton = document.getElementById('loginButton')

  function loginUser() {
    const user = document.getElementById('user').value
    const password = document.getElementById('password').value
    const myHeaders = new Headers();
    myHeaders.append("Content-Type", "application/json");

    const raw = JSON.stringify({
      "username": user,
      "password": password
    });

    const requestOptions = {
      method: "POST",
      headers: myHeaders,
      body: raw,
      redirect: "follow"
    };

    const request = fetch("http://localhost:1000/api/login", requestOptions)
    request.then(async (response) => {
      if (response.status === 200) {
        window.location.replace("http://localhost:1000/home")
      } else {
        alert(response.text())
     }
    })
  }

  function secure() {
    var password = document.getElementById("password");
    if (password.type === "password") {
      password.type = "text"
    } else {
      password.type = "password"
    }
  }

  function toggleLoginButton() {
    const user = document.getElementById('user').value;
    const password = document.getElementById('password').value
    loginButton.disabled = !(user.length > 0 && password.length > 0)
  }

</script>

</html>